<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title id="site-title">💉 حاسبة جرعة التخدير</title>
  <style id="site-style">
    body { font-family: Arial; background: #f4f8fb; text-align: center; padding: 30px; }
    .box { background: white; padding: 25px; border-radius: 20px; width: 350px; margin: auto; box-shadow: 0 0 10px #aaa; }
    input, select { width: 90%; padding: 10px; margin: 10px 0; font-size: 16px; border: 1px solid #ccc; border-radius: 8px; }
    button { padding: 12px 20px; font-size: 16px; border: none; border-radius: 10px; background: #0077ff; color: white; cursor: pointer; }
    button:hover { background: #005fcc; }
    .result { text-align: left; margin-top: 20px; background: #f9f9f9; padding: 15px; border-radius: 10px; font-size: 16px; }
    .admin-link { margin-top: 20px; display: block; color: #0077ff; cursor: pointer; }
  </style>
</head>
<body>
  <h1 id="main-header">💉 حاسبة جرعة التخدير</h1>
  <div class="box">
    <label>وزن المريض (كغ):</label><br>
    <input type="number" id="weight" placeholder="مثال: 70"><br>
    
    <label>اختر الدواء:</label><br>
    <select id="drug"></select><br>
    
    <button onclick="calculate()">احسب الجرعة</button>
    
    <div class="result" id="output"></div>
  </div>
  <a class="admin-link" onclick="goAdmin()">⚙️ لوحة التحكم</a>

  <script>
    // ✅ إعدادات افتراضية (تتغير من لوحة التحكم)
    let settings = JSON.parse(localStorage.getItem("settings")) || {
      title: "💉 حاسبة جرعة التخدير",
      header: "💉 حاسبة جرعة التخدير",
      background: "#f4f8fb",
      drugs: [
        { name: "Propofol", dose: 2, unit: "mg/kg" },
        { name: "Midazolam", dose: 0.1, unit: "mg/kg" },
        { name: "Succinylcholine", dose: 1, unit: "mg/kg" }
      ]
    };

    // تحديث الواجهة
    document.title = settings.title;
    document.getElementById("main-header").innerText = settings.header;
    document.body.style.background = settings.background;

    let drugSelect = document.getElementById("drug");
    settings.drugs.forEach(d => {
      let opt = document.createElement("option");
      opt.value = d.name;
      opt.textContent = d.name + " (" + d.dose + " " + d.unit + ")";
      drugSelect.appendChild(opt);
    });

    function calculate() {
      let w = parseFloat(document.getElementById("weight").value);
      let drug = settings.drugs.find(d => d.name === document.getElementById("drug").value);
      if (isNaN(w) || w <= 0) {
        document.getElementById("output").innerHTML = "⚠️ الرجاء إدخال وزن صحيح.";
        return;
      }
      let result = w * drug.dose;
      document.getElementById("output").innerHTML = ✅ ${drug.name}: ${result.toFixed(2)} ${drug.unit.split("/")[0]};
    }

    function goAdmin() {
      let pass = prompt("أدخل كلمة مرور المدير:");
      if (pass === "mustafa@2006#1") {
        window.location.href = "admin.html";
      } else {
        alert("❌ كلمة مرور خاطئة");
      }
    }
  </script>
</body>
</html>
